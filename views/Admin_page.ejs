<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css/adminstyle.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <style>

        @media only screen and (max-width: 768px) {
            #productsSection {
                padding: 2rem;
            }
        }

        .form-container {
            display: flex;
            justify-content: space-between;
        }

        .form-container > div {
            width: 48%; 
        }

        output{
            display: flex;
            flex-direction: row;
            width: 30vw;
        }

        output img{
            height: 15vh;
            margin: 0.5rem;
            border-radius: 1rem;
            width:auto;
        }


        .form-container input,
        .form-container textarea,
        .form-container select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            box-sizing: border-box;
            border: 1px solid lightgrey;
            border-radius: 1rem;
        }

        .form-container button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</style>
</head>

<body>
    <div class="container">
        <nav>
            <ul>
                <li><a href="#" class="logo">
                    <img src="assets/logo.PNG" alt="">
                    <span class="nav-item admin">Admin Panel</span>
                </a></li>
                <li><a href="#" onclick="showDashboard()" id="dashboardTab">
                    <i class="fas fa-id-card"></i>
                    <span class="nav-item">Dashboard</span>
                </a></li>
                <li><a href="#" onclick="showAnalytics()" id="analyticsTab">
                    <i class="fas fa-user"></i>
                    <span class="nav-item">Users</span>
                </a></li>
                <li><a href="#" onclick="showOrders()" id="ordersTab">
                    <i class="fas fa-store"></i>
                    <span class="nav-item">Orders</span>
                </a></li>
                <li><a href="#" onclick="showProducts()" id="productsTab">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="nav-item">Add Products</span>
                </a></li>
                <li><a href="#" onclick="showCategories()" id="categoriesTab">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-item">Categories</span>
                </a></li>
                <li><a href="#" onclick="showInventory()" id="inventoryTab">
                    <i class="fas fa-warehouse"></i>
                    <span class="nav-item">Inventory</span>
                </a></li>
                <li><a href="#" onclick="showPayments()" id="paymentsTab">
                    <i class="fas fa-wallet"></i>
                    <span class="nav-item">Wallet</span>
                </a></li>
                <li><a href="#" onclick="showCoupon()" id="couponTab">
                    <i class="fas fa-gift"></i>
                    <span class="nav-item">Coupons</span>
                </a></li>
                <li><a href="#" onclick="showSettings()" id="settingsTab">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="nav-item">Log Out</span>
                </a></li>
            </ul>
        </nav>        

        <section class="main" id="dashboardSection">
            <div class="main-top">
                <h1>Summary</h1>
            </div>
            <div class="main-skills">
                <div class="card">
                    <iconify-icon class="icon" icon="emojione:money-bag"></iconify-icon>
                    <h2>Rs 11,200</h2>
                    <h4>Today Sales</h4>
                </div>
                <div class="card">
                    <iconify-icon class="icon" icon="emojione-v1:shopping-bags"></iconify-icon>
                    <h2>65</h2>
                    <h4>Today Orders</h4>
                </div>
                <div class="card">
                    <iconify-icon class="icon" icon="openmoji:timer"></iconify-icon>
                    <h2>20</h2>
                    <h4>Pending Orders</h4>
                </div>
                <div class="card">
                    <iconify-icon class="icon" icon="emojione:shopping-cart"></iconify-icon>
                    <h2>Rs 1,43,000</h2>
                    <h4>Monthly Sales</h4>
                </div>
            </div>

            <section class="main-course">
                <h1>Analytics</h1>
                <div class="course-box">
                    <div>
                        <canvas id="myChart" class="chart"></canvas>
                    </div>
                    <div>
                        <h2>Top Selling Products</h2>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                          <tbody>
                            
                            <tr>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: center;"><img src="images/Product1.jpg" alt="Product 1" style="max-width: 50px; max-height: 50px;"></td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Product 1 Name</td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">1000 Units Sold</td>
                            </tr>

                            
                            <tr>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: center;"><img src="images/Product2.jpg" alt="Product 2" style="max-width: 50px; max-height: 50px;"></td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Product 2 Name</td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">800 Units Sold</td>
                            </tr>

                            
                            <tr>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: center;"><img src="images/Product3.jpg" alt="Product 3" style="max-width: 50px; max-height: 50px;"></td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Product 3 Name</td>
                              <td style="border: 1px solid #ddd; padding: 8px; text-align: left;">700 Units Sold</td>
                            </tr>

                          </tbody>
                        </table>
                      </div>
            </section>
        </section>

        <section class="main" id="ordersSection" style="display:none;">
            <section class="main-orders">
                <h1>Orders</h1>
                <div class="orders-container">
                    <ul class="list">
                        <li class="active" onclick="showOrderTab('allOrders')" data-tab="allOrders">All Orders</li>
                        <li onclick="showOrderTab('pendingOrders')" data-tab="pendingOrders">Pending Orders</li>
                        <li onclick="showOrderTab('completedOrders')" data-tab="completedOrders">Completed Orders</li>
                    </ul>
                    <div>
                        <div class="order-table" id="allOrdersTab" style="display: none;">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width: 15%;">Order Id</th>
                                        <th style="width: 15%;">User Name</th>
                                        <th style="width: 20%;">Product Name</th>
                                        <th style="width: 15%;">Category</th>
                                        <th style="width: 15%;">Price</th>
                                        <th style="width: 15%;">Date</th>
                                        <th style="width: 20%;">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="allOrdersBody"></tbody>
                            </table>
                        </div>
                        <div class="order-table" id="pendingOrdersTab" style="display: none;">
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="width: 15%;">Order Id</th>
                                        <th style="width: 15%;">User Name</th>
                                        <th style="width: 20%;">Product Name</th>
                                        <th style="width: 15%;">Category</th>
                                        <th style="width: 15%;">Price</th>
                                        <th style="width: 15%;">Date</th>
                                        <th style="width: 20%;">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="pendingOrdersBody">
                                </tbody>
                            </table>
                        </div>
                        <div class="order-table" id="completedOrdersTab" style="display: none;"></div>
                    </div>
                </div>
            </section>
        </section>

        <section class="main" id="productsSection" style="display: none;">
            <section class="main-orders">
            <h1 style="margin-bottom: 0.3rem;">Add Product</h1>
                <div class="form-container">
                    <div>
                        <label for="productId">Product Id:</label>
                        <input type="text" id="productId" name="productId" required>

                        <label for="productName">Product Name:</label>
                        <input type="text" id="productName" name="productName" required>

                        <label for="productDescription">Product Description:</label>
                        <textarea id="productDescription" name="productDescription" rows="4" required></textarea>

                        <label for="originalPrice">Original Price (₹):</label>
                        <input type="number" id="originalPrice" name="originalPrice" required>

                        <label for="offeredPrice">Offered Price (₹)<span style="color: #999;">(Amount to be displayed to User)</span>:</label>
                        <input type="number" id="offeredPrice" name="offeredPrice" required>

                        <label for="category">Category:</label>

                        <select id="category" name="category" required>
                            <option value="Face Care">Face Care</option>
                            <option value="Hair Care">Hair Care</option>
                            <option value="Body Care">Body Care</option>
                            <option value="Beard Care">Beard Care</option>
                        </select>

                         <button onclick="addProduct()" style="margin-top: 1rem;">Publish Product</button>

                    </div>

                    <div>
                        <label for="stock">Stock:</label>
                        <input type="number" id="stock" name="stock" required>
                        <label for="mainImage">Main Image (250x250):</label>
                        <input type="file" id="mainImage" name="mainImage" accept="image/*" required onchange="previewImage('mainImage')" style="border: none; padding: 0.5rem; background-color: #f0f0f0;">
                        <img id="mainImagePreview" alt="Preview" style="max-width: 50%; height: 15vh; margin-top: 0rem; margin-bottom: 1rem;border-radius: 1rem;">
                        <br>
                        <form id='post-form' class='post-form' method='post'>
                            <label for='files'>Select multiple files: </label>
                            <input id='files' type='file' multiple/>
                            <output id='result'  style="width:30vw;height:30vh;">
                        </form>
                    </div>
                </div>
            </section>
        </section>

        <section class="main" id="categoriesSection">
            <section class="main-orders">
                <h1>Add/View Categories</h1>
                <div class="category-container">
                    <div class="category-input">
                        <input type="text" id="categoryName" placeholder="Category Name">
                        <div id="currentDateTime" style="display: none;"></div>
                        <button onclick="addCategory()" class="add-category">Add Category</button>
                    </div>

                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Serial Number</th>
                                <th>Category Name</th>
                                <th>Date of Adding</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="categoryTableBody">

                            <tr>
                                <td>1</td>
                                <td>Electronics</td>
                                <td>2023-11-28</td>
                                <td>
                                    <button onclick="editCategory(this.parentNode.parentNode)">Edit</button>
                                    <button onclick="deleteCategory(this.parentNode.parentNode)">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Clothing</td>
                                <td>2023-11-27</td>
                                <td>
                                    <button onclick="editCategory(this.parentNode.parentNode)">Edit</button>
                                    <button onclick="deleteCategory(this.parentNode.parentNode)">Delete</button>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </section>
        </section>

        <section class="main" id="analyticsSection" style="display: none;">
            <section class="main-orders">
                <h1>User Analytics</h1>
                <div class="user-container">
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>User Name</th>
                                <th>Phone Number</th>
                                <th>Pin Code</th>
                                <th>Account Created</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="userTableBody">
                            <tr>
                                <td>John Doe</td>
                                <td>123-456-7890</td>
                                <td>12345</td>
                                <td>2023-11-27</td>
                                <td>
                                    <button onclick="toggleUserBlock('John Doe')" class="block-button">Block</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Jane Smith</td>
                                <td>987-654-3210</td>
                                <td>54321</td>
                                <td>2023-11-27</td>
                                <td>
                                    <button onclick="toggleUserBlock('Jane Smith')" class="block-button">Block</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </section>   

        <section class="main" id="inventorySection" style="display: none;">
            <section class="main-orders">
                <h1>Products Grid</h1>
                <div class="product-grid" id="productGrid">

                    <div class="product-card">
                        <img class="product-image" src="shoes_images/spray1.jpg" alt="Product 1">
                        <div class="product-name">Product 1</div>
                        <div class="product-actions">
                            <button onclick="editProduct(1)">Edit</button>
                            <button onclick="deleteProduct(1)">Delete</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <img class="product-image" src="shoes_images/spray2.jpg" alt="Product 2">
                        <div class="product-name">Product 2</div>
                        <div class="product-actions">
                            <button onclick="editProduct(2)">Edit</button>
                            <button onclick="deleteProduct(2)">Delete</button>
                        </div>
                    </div>

                </div>
            </section>
        </section>

        <section class="main" id="paymentsSection" style="display: none;">
            <section class="main-orders">
                <h1>My Wallet</h1>
                <div class="wallet">
                    <div class="wallet-top" style="display:flex;justify-content: space-between;">
                        <div class="card">
                            <iconify-icon class="icon" icon="noto:money-bag"></iconify-icon>
                            <h4>Rs 50,000</h4>
                            <h5>Total Income</h5>
                        </div>
                        <div class="card">
                            <iconify-icon class="icon" icon="meteocons:clear-day-fill"></iconify-icon>
                            <h4>Rs 50,000</h4>
                            <h5>Today's Income</h5>
                        </div>
                        <div class="card">
                            <iconify-icon class="icon" icon="noto-v1:shopping-bags"></iconify-icon>
                            <h4>Rs 299</h4>
                            <h5>Average Order Value</h5>
                        </div>

                    </div>
                    <br>
                    <div class="mt-4">
                        <h3>Weekly Summary</h3>
                        
                    </div>

                    <div class="wallet-bottom">
                        <h3>Recent Transactions</h3>

                        <div style="display: flex;">
                            <div class="mb-3">
                                <button class="btn" id="btnToday">Today</button>
                                <button class="btn" id="btnLast7Days">Last 7 Days</button>
                                <button class="btn" id="btnLast30Days">Last 30 Days</button>
                            </div>

                            <div>
                                <input type="text" class="form-control" id="datePicker">
                                <button class="btn-show" id="btnShow">Show</button>
                            </div>
                        </div>

                        <table class="wallet-table">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Order ID</th>
                                    <th scope="col">User Name</th>
                                    <th scope="col">Pincode</th>
                                    <th scope="col">Product Name</th>
                                    <th scope="col">Amount Received</th>
                                </tr>
                            </thead>
                            <tbody>
                                
                                <tr>
                                    <th scope="row">1</th>
                                    <td>ORD123456</td>
                                    <td>John Doe</td>
                                    <td>123456</td>
                                    <td>Product XYZ</td>
                                    <td>$50.00</td>
                                </tr>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>ORD123456</td>
                                    <td>John Doe</td>
                                    <td>123456</td>
                                    <td>Product XYZ</td>
                                    <td>$50.00</td>
                                </tr>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>ORD123456</td>
                                    <td>John Doe</td>
                                    <td>123456</td>
                                    <td>Product XYZ</td>
                                    <td>$50.00</td>
                                </tr>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>ORD123456</td>
                                    <td>John Doe</td>
                                    <td>123456</td>
                                    <td>Product XYZ</td>
                                    <td>$50.00</td>
                                </tr>

                                
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </section>

        <section class="main" id="coupon">
            <section class="main-orders">
                <h1>Add/Delete Coupons</h1>
    
               <div class="coupon-container">
                <form id="couponForm">
                    <table>
                        <tr>
                            <th>Coupon Name</th>
                            <th>Discount Percentage</th>
                            <th>Validity Start</th>
                            <th>Validity End</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td>
                                <input type="text" id="couponName" name="couponName" placeholder="Enter coupon name" required>
                            </td>
                            <td>
                                <input type="number" id="discountPercentage" name="discountPercentage" placeholder="Enter discount percentage"
                                    required min="1" max="100" style="width: 15vw;">
                            </td>
                            <td>
                                <input type="datetime-local" id="validityStart" name="validityStart" placeholder="Select validity start" required>
                            </td>
                            <td>
                                <input type="datetime-local" id="validityEnd" name="validityEnd" placeholder="Select validity end" required>
                            </td>
                            <td>
                                <button type="button" onclick="addCoupon()">Add Coupon</button>
                            </td>
                        </tr>
                    </table>
                </form>
    
                <!-- Active Coupons List -->
                <div style="overflow: auto;height: 60vh;">
                    <h2 style="margin-top: 2rem;">Active Coupons</h2>
                    <table id="couponList">
                        <tr>
                            <th>Coupon Name</th>
                            <th>Discount Percentage</th>
                            <th>Validity Start</th>
                            <th>Validity End</th>
                            <th>Action</th>
                        </tr>
                        <!-- Coupon items go here -->
                    </table>
                </div>
            </div>
            </section>
        </section>
    
    

    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        function showDashboard() {
        showSection('dashboardSection');
        setActiveTab('dashboardTab');
    }

    function showAnalytics() {
        showSection('analyticsSection');
        setActiveTab('analyticsTab');
    }

    function showOrders() {
        showSection('ordersSection');
        setActiveTab('ordersTab');
    }

    function showProducts() {
        showSection('productsSection');
        setActiveTab('productsTab');
    }

    function showCategories() {
        showSection('categoriesSection');
        setActiveTab('categoriesTab');
    }

    function showInventory() {
        showSection('inventorySection');
        setActiveTab('inventoryTab');
    }

    function showPayments() {
        showSection('paymentsSection');
        setActiveTab('paymentsTab');
    }

    function showSettings() {
        showSection('settingsSection');
        setActiveTab('settingsTab');
    }

    function showLogout() {
        showSection('logoutSection');
        setActiveTab('logoutTab');
    }

    function showCoupon() {
        showSection('coupon');
        setActiveTab('couponTab');
    }

        function showSection(sectionId) {

            var sections = document.getElementsByClassName('main');
            for (var i = 0; i < sections.length; i++) {
                sections[i].style.display = 'none';
            }

            var selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.style.display = 'block';
            }
        }

        var orders = [
            {
                orderId: 1,
                userName: 'john.doe@example.com',
                productName: 'Laptop',
                category: 'Electronics',
                price: '$1200.00',
                date: '2023-11-25',
                status: 'Shipped'
            },
            {
                orderId: 2,
                userName: 'jane.smith@example.com',
                productName: 'Smartphone',
                category: 'Electronics',
                price: '$800.00',
                date: '2023-11-24',
                status: 'Delivered'
            },
            {
                orderId: 3,
                userName: 'bob.jones@example.com',
                productName: 'Headphones',
                category: 'Audio',
                price: '$150.00',
                date: '2023-11-23',
                status: 'Pending'
            },
            {
                orderId: 4,
                userName: 'alice.johnson@example.com',
                productName: 'Camera',
                category: 'Photography',
                price: '$500.00',
                date: '2023-11-22',
                status: 'Shipped'
            }
        ];

    function initOrders() {

        // renderOrders('allOrders');
    }

    function showOrderTab(tabName) {

    document.getElementById('allOrdersTab').style.display = 'none';
    document.getElementById('pendingOrdersTab').style.display = 'none';
    document.getElementById('completedOrdersTab').style.display = 'none';

    document.getElementById(tabName + 'Tab').style.display = 'block';

}

document.addEventListener('DOMContentLoaded', function () {
    showSection('dashboardSection');
    initOrders();
    showOrderTab('allOrders'); 
});

    function previewImage(inputId) {
        const input = document.getElementById(inputId);
        const preview = document.getElementById(`${inputId}Preview`);

        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    function previewImages(inputId) {
        const input = document.getElementById(inputId);
        const previewContainer = document.getElementById(`${inputId}Preview`);
        previewContainer.innerHTML = '';

        if (input.files && input.files.length > 0 && input.files.length <= 3) {
            Array.from(input.files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'image-preview-small';
                    previewContainer.appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        } else {
            alert("Please upload between 1 and 3 additional images.");
            input.value = ''; 
        }
    }

    function addProduct() {
        const itemId = document.getElementById('productId').value;
        const name = document.getElementById('productName').value;
        const description = document.getElementById('productDescription').value;
        const originalPrice = document.getElementById('originalPrice').value;
        const offeredPrice = document.getElementById('offeredPrice').value;
        const category = document.getElementById('category').value;
        const stock = document.getElementById('stock').value;
        const mainImage = document.getElementById('mainImage').files[0]; // Use files[0] to get the first file
        const additionalImages = document.getElementById('files').files; // Use files to get all files

        if (
            itemId &&
            name &&
            description &&
            originalPrice &&
            offeredPrice &&
            category &&
            stock &&
            mainImage &&
            additionalImages.length > 0
        ) {
            let imageLink = [];

            // Add the main image
            imageLink.push(URL.createObjectURL(mainImage));

            // Add additional images
            for (const file of additionalImages) {
                imageLink.push(URL.createObjectURL(file));
            }

            let formData = {
                itemId,
                name,
                description,
                originalPrice,
                offeredPrice,
                category,
                stock,
                imageLink,
            };

            axios
                .post('/api/products', formData)
                .then((response) => {
                    alert('Product added successfully:', response.data);
                })
                .catch((error) => {
                    console.error('Error adding product:', error);
                });
        } else {
            alert('Please fill in all the details before adding the product.');
        }
    }
    document.addEventListener('DOMContentLoaded', function () {
        updateDateTime();
    });

    function showSection(sectionId) {
        var sections = document.getElementsByClassName('main');
        for (var i = 0; i < sections.length; i++) {
            sections[i].style.display = 'none';
        }

        var selectedSection = document.getElementById(sectionId);
        if (selectedSection) {
            selectedSection.style.display = 'block';
        }
    }

    var categories = [
        { serialNumber: 1, categoryName: 'Electronics', dateOfAdding: '2023-11-28' },
        { serialNumber: 2, categoryName: 'Clothing', dateOfAdding: '2023-11-27' }

    ];

    document.addEventListener('DOMContentLoaded', function () {
        updateDateTime();
        renderCategories();
    });

    function renderCategories() {
        var categoryTableBody = document.getElementById('categoryTableBody');
        categoryTableBody.innerHTML = '';

        categories.forEach(function (category) {
            var row = categoryTableBody.insertRow();
            var serialNumberCell = row.insertCell(0);
            var categoryNameCell = row.insertCell(1);
            var dateOfAddingCell = row.insertCell(2);
            var actionCell = row.insertCell(3);

            serialNumberCell.textContent = category.serialNumber;
            categoryNameCell.textContent = category.categoryName;
            dateOfAddingCell.textContent = category.dateOfAdding;

            var editButton = document.createElement('button');
            editButton.textContent = 'Edit';
            editButton.onclick = function () {
                editCategory(row);
            };

            var deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.onclick = function () {
                deleteCategory(row);
            };

            actionCell.appendChild(editButton);
            actionCell.appendChild(deleteButton);
        });
    }

    function updateDateTime() {
        var currentDateTimeElement = document.getElementById('currentDateTime');
        var now = new Date();
        var formattedDateTime = now.toLocaleString();
        currentDateTimeElement.textContent = formattedDateTime;
    }

    function addCategory() {
        var categoryName = document.getElementById('categoryName').value;
        if (categoryName.trim() === '') {
            alert('Please enter a category name.');
            return;
        }

        var categoryTableBody = document.getElementById('categoryTableBody');
        var row = categoryTableBody.insertRow();
        var serialNumberCell = row.insertCell(0);
        var categoryNameCell = row.insertCell(1);
        var dateOfAddingCell = row.insertCell(2);
        var actionCell = row.insertCell(3);

        serialNumberCell.textContent = categoryTableBody.rows.length;
        categoryNameCell.textContent = categoryName;
        dateOfAddingCell.textContent = new Date().toLocaleString();

        var editButton = document.createElement('button');
        editButton.textContent = 'Edit';
        editButton.className = 'edit-button';
        editButton.onclick = function () {
            editCategory(row);
        };

        var deleteButton = document.createElement('button');
        deleteButton.textContent = 'Delete';
        deleteButton.className = 'delete-button';
        deleteButton.onclick = function () {
            deleteCategory(row);
        };

        actionCell.appendChild(editButton);
        actionCell.appendChild(deleteButton);

        document.getElementById('categoryName').value = '';
    }

    function editCategory(row) {

        alert('Edit category functionality will be implemented here.');
    }

    function deleteCategory(row) {
        var confirmation = confirm("Are you sure you want to delete this category?");
        if (confirmation) {
            row.remove();
            updateSerialNumbers();
        }
    }

    function updateSerialNumbers() {
        var categoryTableBody = document.getElementById('categoryTableBody');
        for (var i = 0; i < categoryTableBody.rows.length; i++) {
            categoryTableBody.rows[i].cells[0].textContent = i + 1;
        }
    }

    var users = [
    { name: 'John Doe', phoneNumber: '123-456-7890', pinCode: '12345', accountCreated: '2023-11-27', blocked: false },
    { name: 'Jane Smith', phoneNumber: '987-654-3210', pinCode: '54321', accountCreated: '2023-11-27', blocked: false }

];

function renderUsers() {
    var tableBody = document.getElementById('userTableBody');
    tableBody.innerHTML = '';

    users.forEach(user => {
        var row = document.createElement('tr');
        row.innerHTML = `
            <td>${user.name}</td>
            <td>${user.phoneNumber}</td>
            <td>${user.pinCode}</td>
            <td>${user.accountCreated}</td>
            <td>
                <button onclick="toggleUserBlock('${user.name}')" class="${user.blocked ? 'unblock-button' : 'block-button'}">
                    ${user.blocked ? 'Unblock' : 'Block'}
                </button>
            </td>
        `;
        tableBody.appendChild(row);
    });
}

function toggleUserBlock(userName) {
    var user = users.find(u => u.name === userName);
    if (user) {
        user.blocked = !user.blocked;
        renderUsers(); 
        alert(`${user.name} is ${user.blocked ? 'blocked' : 'unblocked'}`);
    }
}

function setActiveTab(tabId) {

    var tabs = document.querySelectorAll('nav ul li a');
    tabs.forEach(tab => {
        tab.classList.remove('active');
    });

    var activeTab = document.getElementById(tabId);
    if (activeTab) {
        activeTab.classList.add('active');
    }
}

renderUsers();
    </script>

<script>
    $(document).ready(function () {

        $('#datePicker').datepicker();

        $('#btnToday').on('click', function () {

            $('#datePicker').datepicker('setDate', new Date());
        });

        $('#btnLast7Days').on('click', function () {

            var last7Days = new Date();
            last7Days.setDate(last7Days.getDate() - 7);
            $('#datePicker').datepicker('setDate', last7Days);
        });

        $('#btnLast30Days').on('click', function () {

            var last30Days = new Date();
            last30Days.setDate(last30Days.getDate() - 30);
            $('#datePicker').datepicker('setDate', last30Days);
        });

        $('#btnShow').on('click', function () {

            var selectedDate = $('#datePicker').datepicker('getDate');

            console.log('Selected Date:', selectedDate);
        });
    });
</script>

    <script>
    var xValues = ["Monday", "Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
    var yValues = [55, 49, 44, 24, 15,21,30];
    var barColors = ["red", "green","blue","orange","brown","purple","maroon"];

    new Chart("myChart", {
      type: "bar",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        legend: {display: false},
        title: {
          display: true,
          text: "Last 7 Days Sales"
        }
      }
    });

    </script>

<script>
    // Function to limit the number of uploaded files to 3
    function limitFiles(files) {
        var maxFiles = 3;
        return Array.from(files).slice(0, maxFiles);
    }

    window.onload = function () {
        // Check File API support
        if (window.File && window.FileList && window.FileReader) {
            var filesInput = document.getElementById("files");
            var output = document.getElementById("result");
            var uploadedFiles = [];

            filesInput.addEventListener("change", function (event) {
                var files = event.target.files; // FileList object
                var newFiles = limitFiles(files);

                if (files.length > 3) {
                    alert("You can upload a maximum of 3 files.");
                    // Clear the file input to prevent additional files from being selected
                    filesInput.value = "";
                    return;
                }

                newFiles.forEach(function (file) {
                    // Only pics
                    if (!file.type.match('image')) return;

                    var picReader = new FileReader();
                    picReader.addEventListener("load", function (event) {
                        var picFile = event.target;
                        var img = document.createElement("img");
                        img.className = 'thumbnail';
                        img.src = picFile.result;
                        img.title = picFile.name;
                        output.appendChild(img);
                        uploadedFiles.push(file);
                    });

                    // Read the image
                    picReader.readAsDataURL(file);
                });
            });
        } else {
            console.log("Your browser does not support File API");
        }
    }
</script>

<script>
    // Function to add a coupon
    function addCoupon() {
        var couponName = document.getElementById('couponName').value;
        var discountPercentage = document.getElementById('discountPercentage').value;
        var validityStart = document.getElementById('validityStart').value;
        var validityEnd = document.getElementById('validityEnd').value;

        // You can perform validation and formatting of data here

        // Create coupon item
        var couponList = document.getElementById('couponList');
        var newRow = couponList.insertRow(-1);
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        var cell5 = newRow.insertCell(4);

        cell1.innerHTML = couponName;
        cell2.innerHTML = discountPercentage + "%";
        cell3.innerHTML = validityStart;
        cell4.innerHTML = validityEnd;
        cell5.innerHTML = "<button onclick='deleteCoupon(this)'>Delete</button>";

        // Clear the form
        document.getElementById('couponForm').reset();
    }

    // Function to delete a coupon
    function deleteCoupon(button) {
        var row = button.parentNode.parentNode;
        row.parentNode.removeChild(row);
    }
</script>

</body>

</html>