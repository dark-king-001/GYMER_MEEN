<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Product Description</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/Product_Desc.css">
    <style>
        .promo-strip {
            background-color: #ffcc00;
            text-align: center;
            padding: 0.5rem 0;
            color: #000;
            font-weight: bold;
        }

        .navbar {
            background-color: #000;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #fff;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
            color: #fff;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .nav-buttons button {
            background-color: transparent;
            border: none;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="promo-strip">
        Get 25% Off on Every Purchase
    </div>

    <div class="navbar">
        <a href="/" class="logo">WhiteWolf</a>

        <div class="nav-buttons">
          <% if (content.isLoggedIn === true) { %>
            <a href="/cart">
            <button><i class="fas fa-shopping-cart"></i> Cart</button>
            </a>
            <a href="/profile">
            <button><i class="fas fa-user"></i> Profile</button>
            </a>
          <% } else { %>
            <a href="/signup">
            <button><i class="fas fa-user"></i> Login in</button>
            </a>
            <a href="/login">
            <button><i class="fas"></i>| Sign up</button>
            </a>
          <% } %> 

        </div>
    </div>

    <div class="card-wrapper">
        <div class="card">
            <div class="product-imgs">
                <div class="img-display">
                    <div class="img-showcase">
                        <% item.imageLink.forEach((image, index) => { %>
                            <img src="<%= image %>" alt="shoe image">
                        <% }); %>
                    </div>
                </div>
                <div class="img-select">
                    <% item.imageLink.forEach((image, index) => { %>
                        <div class="img-item">
                            <a href="#" data-id="<%= index + 1 %>">
                                <img src="<%= image %>" alt="shoe image">
                            </a>
                        </div>
                    <% }); %>
                </div>
            </div>

            <div class="product-content">
                <h2 class="product-title"><%= item.name %></h2>
                <a href="#" class="product-link">WhiteWolf Originals</a>
                <div class="product-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span>4.7(21)</span>
                </div>

                <div class="product-price">
                    <p class="new-price">Offer Price: <span>&#8377;<%= item.offeredPrice.toFixed(2) %></span></p>
                    <p class="last-price">MRP: <span>&#8377;<%= item.originalPrice.toFixed(2) %></span></p>
                </div>

                <div class="product-detail">
                    <h2>about this item: </h2>
                    <p><%= item.description %></p>
                    <ul>
                        <li>Contents: <span>Aqua, Potassium Thioglycolate, LPG, Calcium Hydroxide, Urea, Glycerin.</span></li>
                        <li>Available: <span><%= item.stock %> 0 ? 'In stock' : 'Out of stock' %></span></li>
                        <li>Category: <span><%= item.category %></span></li>
                    </ul>
                </div>

                <div class="purchase-info">
                    <button type="button" class="btn addCartButton"><i class="fas fa-shopping-cart"></i> Add to Cart</button>
                </div>

                <div class="social-links">
                    <p>Share This Product : </p>
                    <!-- Add your social links if needed -->
                </div>
            </div>
        </div>
    </div>

    <div class="product-container">
        <div class="product-header">
            <div class="view-related-products text-white">View Related Products</div>
            <button class="view-all-btn">View All</button>
        </div>

        <div class="product-grid" id="productGrid">
            <!-- Add your product grid content if needed -->
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        document.querySelector(`.addCartButton`).addEventListener('click', async () => {
            event.preventDefault();
            try {
                const Id = '<%= item.itemId %>';
                const response = await axios.post('/addItem', { itemId: Id});
                if (response.status === 200) {
                    console.log(response.data.message);
                    // Optionally, update the UI to reflect the item being added to the cart
                } else {
                    console.error('Error adding item to cart:', response.data.message);
                    // Optionally, handle the error and update the UI accordingly
                }
            } catch (error) {
                console.error('Error adding item to cart:', error.message);
                // Optionally, handle the error and update the UI accordingly
            }
        });
    </script>
</body>
</html>
